(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{163:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return a})),n.d(t,"default",(function(){return l}));var r=n(1),i=n(11),o=(n(0),n(174)),c={id:"subscription",title:"Push Notifications Subscription",sidebar_label:"Subscription"},s={id:"subscription",title:"Push Notifications Subscription",description:"The typical flow for subscribing a device for receiving push notification in real time is to first register the device at the vendor's servers (e.g. FCM), then publishing the received token to your own push management servers.",source:"@site/docs/subscription.md",permalink:"/react-native-notifications/docs/subscription",editUrl:"https://github.com/wix/react-native-notifications/edit/master/docs/docs/subscription.md",sidebar_label:"Subscription",sidebar:"docs",previous:{title:"React Native Notifications Getting Started Guide",permalink:"/react-native-notifications/docs/getting-started"},next:{title:"Handling Notification Events",permalink:"/react-native-notifications/docs/notifications-events"}},a=[],u={rightToc:a};function l(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The typical flow for subscribing a device for receiving push notification in real time is to first register the device at the vendor's servers (e.g. FCM), then publishing the received token to your own push management servers."),Object(o.b)("p",null,"This section is about the first part of the flow."),Object(o.b)("p",null,"In order to handle notifications, you must register the ",Object(o.b)("inlineCode",{parentName:"p"},"remoteNotificationsRegistered")," event beforehand."),Object(o.b)("p",null,"In your React Native app:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"import { Notifications } from 'react-native-notifications';\n\nclass App extends Component {\n    constructor() {\n        // Request permissions on iOS, refresh token on Android\n        Notifications.registerRemoteNotifications();\n\n        Notifications.events().registerRemoteNotificationsRegistered((event: Registered) => {\n            // TODO: Send the token to my server so it could send back push notifications...\n            console.log(\"Device Token Received\", event.deviceToken);\n        });\n        Notifications.events().registerRemoteNotificationsRegistrationFailed((event: RegistrationError) => {\n            console.error(event);\n        });\n    }\n}\n\n")),Object(o.b)("p",null,"When you have the device token, POST it to your server and register the device in your notifications provider (Amazon SNS, Azure, etc.)."),Object(o.b)("p",null,"You can check if the user granted permissions on iOS by calling ",Object(o.b)("inlineCode",{parentName:"p"},"checkPermissions()"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"Notifications.ios.checkPermissions().then((currentPermissions) => {\n    console.log('Badges enabled: ' + !!currentPermissions.badge);\n    console.log('Sounds enabled: ' + !!currentPermissions.sound);\n    console.log('Alerts enabled: ' + !!currentPermissions.alert);\n});\n")))}l.isMDXComponent=!0},174:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),i=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=i.a.createContext({}),l=function(e){var t=i.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},p=function(e){var t=l(e.components);return i.a.createElement(u.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},b=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),p=l(n),b=r,d=p["".concat(c,".").concat(b)]||p[b]||f[b]||o;return n?i.a.createElement(d,s({ref:t},u,{components:n})):i.a.createElement(d,s({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=b;var s={};for(var a in t)hasOwnProperty.call(t,a)&&(s[a]=t[a]);s.originalType=e,s.mdxType="string"==typeof e?e:r,c[1]=s;for(var u=2;u<o;u++)c[u]=n[u];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);